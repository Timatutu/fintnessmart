# fintnessmart

# ТЗ: AI‑Платформа для анализа фитнес‑прогресса и персональных тренировок (с MCP)

## 1) Цель проекта
Платформа для анализа фитнес‑прогресса: пользователи загружают аудио/видео тренировок,
фото форм, получают ИИ‑анализ техники, графики прогресса, рекомендации и персональные планы.
Архитектура микросервисная, фронт у Артема, бэк — 6 сервисов.

## 2) Ключевые функции
- Распознавание упражнений по аудио/видео.
- LLM генерирует планы тренировок и рекомендации.
- Аналитика прогресса (графики веса/повторов, прогноз плато).
- Граф связей упражнений и мышц (отжимания → грудь → трицепс).

## 3) Распределение ролей по микросервисам

| Микросервис | Ответственный | Стек и роль |
|---|---|---|
| Сервис 1: Бизнес‑логика | Глеб Буравчик | FastAPI + Postgres — профили, CRUD тренировок, челленджи |
| Сервис 2: Аналитика | Тимур Хозяин | FastAPI + ClickHouse — дашборды, тренды |
| Сервис 3: Графовые связи | Артур Лыжник | FastAPI + Neo4j — связи упражнений/мышц |
| Сервис 4: Упрощённая бизнес‑логика | Михаил Броски | FastAPI + Postgres — быстрые API для фронта |
| Сервис 5: ИИ аудио/картинок | Иванус | FastAPI — анализ видеоформ, распознавание |
| Сервис 6: LLM + рекомендации + MCP | Дмитрий | FastAPI + MCP сервер — планы, анализ заметок, чатбот‑тренер |
| Фронтенд | Артем Клыкин | React/Vue — загрузка, дашборды, чат |

## 4) MCP‑интеграция 6-й микросервис

### 4.1 Назначение MCP в проекте
MCP сервер в 6‑м сервисе используется как стандартный шлюз для LLM‑инструментов:
- доступ к внутренним API других микросервисов;
- доступ к аналитике, графу и медиа‑результатам;
- генерация персональных тренировочных планов и ответов чатбота через единый протокол.

### 4.2 Архитектура интеграции
- Микросервис 6 разворачивает MCP‑сервер (внутренний, без публичного интернета).
- LLM (локально/облачный) подключается к MCP‑серверу и вызывает инструменты.
- MCP‑сервер проксирует доступ к:
  - Сервису 1 (профили, история тренировок),
  - Сервису 2 (метрики прогресса),
  - Сервису 3 (граф связей упражнений),
  - Сервису 5 (результаты распознавания).

### 4.3 MCP‑инструменты (минимальный набор)
- get_user_profile(user_id)
- get_training_history(user_id, range)
- get_progress_metrics(user_id, range)
- get_exercise_graph(exercise_id)
- get_media_analysis(media_id)
- save_recommendation(user_id, plan, summary)

### 4.4 Требования к MCP
- MCP работает по внутренней сети (service‑to‑service).
- Аутентификация: сервисные токены между микросервисами.
- Логи MCP: запрос, инструмент, время ответа, код результата.
- Ограничение доступа: MCP вызывается только 6‑м сервисом и LLM.

### 4.5 Поток данных
1) Пользователь отправляет данные (аудио/видео/заметки).
2) Сервис 5 анализирует медиа и сохраняет результаты.
3) MCP в 6‑м сервисе подтягивает данные из сервисов 1/2/3/5.
4) LLM формирует план и рекомендации.
5) Сервис 6 сохраняет рекомендации и отдаёт их фронту.

## 5) Техническая реализация
- Интеграции: Kafka для событий ("новая тренировка → аналитика"), gRPC для быстрых вызовов.
- Наблюдаемость: Prometheus + Grafana.
- Деплой: Docker/K8s.
- MVP 3–4 недели: аудио‑анализ + дашборд + LLM‑рекомендации.

## 6) Монетизация
- Freemium: базовые планы бесплатно.
- Premium: видео‑анализ и продвинутые рекомендации.
